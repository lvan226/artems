$slickGreen = false;

function greenSlider() {
  if ($(window).width() <= 1090) {
    if (!$slickGreen) {
      $(".rate__row").slick({
        dots: false,
        arrows: true,
        slidesToShow: 1,
        slidesToScroll: 1,
      });
      $slickGreen = true;
    }
  } else if ($(window).width() > 1090) {
    if ($slickGreen) {
      $('.rate__row').slick('unslick');
      $slickGreen = false;
    }
  }
};

$slickGreen2 = false;

function greenSlider2() {
  if ($(window).width() <= 1280) {
    if (!$slickGreen2) {
      $(".workers__item-wrap").slick({
        dots: false,
        arrows: true,
        slidesToShow: 4,
        slidesToScroll: 1,
        responsive: [{
            breakpoint: 1000,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 1,
            }
          },
          {
            breakpoint: 800,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 1
            }
          },
          {
            breakpoint: 551,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 1
            }
          },
          {
            breakpoint: 451,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 1,
            }
          }
        ]
      });
      $slickGreen2 = true;
    }
  } else if ($(window).width() > 1280) {
    if ($slickGreen2) {
      $('.workers__item-wrap').slick('unslick');
      $slickGreen2 = false;
    }
  }
};

function modalActive(id, modal) {
  $(id).on('click', function() {
    var overlay = '<div class="modal__overlay"></div>';
    $(modal).addClass('active');
    $('body').append(overlay);
    $('.modal__close').on('click', function() {
      $(modal).removeClass('active');
      $('.modal__overlay').detach();
    });
  });
}

$(function () {
  $('.results-case').slick({
    slidesToShow: 1,
    speed: 400,
  });

  $('.menu__burger').on('click', function () {
    $('.menu__list').toggleClass('active');
    $(this).toggleClass('active');
    $('body').toggleClass('hidden');
  });

  $(document).scroll(function () {
    var scroll_status = $(document).scrollTop();
    if (scroll_status > 1000) {
      $('.menu').addClass('fixed');
      $('.header').addClass('fixed');
    } else {
      $('.menu').removeClass('fixed');
      $('.header').removeClass('fixed');
    }
  });


  $(document).ready(function () {
    $("#menu").on("click", "a", function (event) {
      //отменяем стандартную обработку нажатия по ссылке
      event.preventDefault();

      //забираем идентификатор бока с атрибута href
      var id = $(this).attr('href'),

        //узнаем высоту от начала страницы до блока на который ссылается якорь
        top = $(id).offset().top;
      if ($(window).width() < 600) {
        top -= 100;
      } else {
        top -= 160;
      }
      //анимируем переход на расстояние - top за 1500 мс

      $('body,html').animate({
        scrollTop: top
      }, 1000);
      $('.menu__list').toggleClass('active');
      $('.menu__burger').toggleClass('active');
      $('body').toggleClass('hidden');
    });
  });

  modalActive('.menu__contact-btn', '#modal2');
  modalActive('.header__btn', '#modal1');
  modalActive('.promotion__btn', '#modal3');
  modalActive('.rate__item-btn', '#modal4');
  modalActive('.cost__btn', '#modal4');
  modalActive('.remember__btn', '#modal5');

  $('.phone-input').inputmask("+7(999)999-99-99");

  var maxLen = 20;
  $('.modal input').keyup(function() {
    var $this = $(this);
    if($this.val().length > maxLen) {
      $this.val($this.val().substr(0, maxLen));
    }
  });


  greenSlider();
  greenSlider2();
});

$(window).on('resize', function () {
  greenSlider();
  greenSlider2();
});